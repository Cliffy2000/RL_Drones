#VRML_SIM R2025a utf8
# license: Copyright Cyberbotics Ltd. Licensed for use only with Webots.
# license url: https://cyberbotics.com/webots_assets_license
# documentation url: https://webots.cloud/run?url=https://github.com/cyberbotics/webots/blob/released/projects/robots/dji/mavic/protos/Mavic2Pro.proto
# keywords: robot/flying
# A quadcopter drone mounted with a motorized camera by the DJI company.

EXTERNPROTO "GlossyPaint.proto"
EXTERNPROTO "MattePaint.proto"

PROTO Mavic2Pro [
  field SFVec3f    translation         0 0 0.065                           # Is `Pose.translation`.
  field SFRotation rotation            0 0 1 0                             # Is `Pose.rotation`.
  field SFString   name                "Drone"                             # Is `Solid.name`.
  field SFString   controller          "<generic>"                         # Is `Robot.controller`.
  field SFColor    bodyColor           0.5 0.5 0.5                         # default gray
]
{
Robot {
  translation IS translation
  rotation IS rotation
  children [
    Shape {
      appearance DEF GREY_PLASTIC PBRAppearance {
        baseColor IS bodyColor
        metalness 0
        roughness 0.8
      }
      geometry Mesh {
        url "Mavic2Pro/meshes/body.obj"
      }
    }
    Shape {
      appearance DEF METAL_APPEARANCE PBRAppearance {
        roughness 0.5
      }
      geometry Mesh {
        url "Mavic2Pro/meshes/body_metal_parts.obj"
      }
    }
    Shape {
      appearance DEF GLASS PBRAppearance {
        baseColor 0.523146 0.8 0.627785
        transparency 0.9
        roughness 0.5
        metalness 0
      }
      geometry Mesh {
        url "Mavic2Pro/meshes/body_lenses.obj"
      }
    }
    DEF COMPASS Compass {
    }
    DEF GPS GPS {
    }
    DEF GYRO Gyro {
    }
    DEF INERTIAL_UNIT InertialUnit {
    }
    DEF REAR_LEFT_HP_HELIX Propeller {
      shaftAxis 0 0 1
      centerOfThrust -0.177179 0.127453 -0.0320282
      thrustConstants 0 0 # thrustConstants -0.00026 0
      torqueConstants 0 0 # torqueConstants 0.0000052 0
      fastHelixThreshold 50
      device RotationalMotor {
        name "rear left propeller"
        maxVelocity 576
        maxTorque 30.0
      }
      fastHelix Solid {
        translation -0.177179 0.127453 -0.0320282
        children [
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_plates.obj"
            }
          }
          Pose {
            translation 0 0 0.02
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.5 0.5 0.5
                  baseColorMap ImageTexture {
                    url "textures/fast_helix.png"
                  }
                  metalness 0
                  roughness 0
                }
                geometry Cylinder {
                  radius 0.12
                  height 0.001
                  side FALSE
                }
              }
            ]
          }
        ]
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.12
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
      slowHelix Solid {
        translation -0.177179 0.127453 -0.0320282
        children [
          Shape {
            appearance MattePaint {
              baseColor 0.5 0.5 0.5
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a.obj"
            }
          }
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_plates.obj"
            }
          }
        ]
        name "rear left propeller"
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.013
        #         }
        #       ]
        #     }
        #     Pose {
        #       translation 0 0 0.023
        #       rotation 0 0 1 0.7854
        #       children [
        #         Box {
        #           size 0.23 0.018 0.005
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
    }
    DEF REAR_RIGHT_HP_HELIX Propeller {
      shaftAxis 0 0 1
      centerOfThrust -0.177179 -0.127453 -0.0320282
      thrustConstants 0 0 # thrustConstants 0.00026 0
      torqueConstants 0 0 # torqueConstants 0.0000052 0
      fastHelixThreshold 50
      device RotationalMotor {
        name "rear right propeller"
        maxVelocity 576
        maxTorque 30.0
      }
      fastHelix Solid {
        translation -0.177179 -0.127453 -0.0320282
        children [
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_plates.obj"
            }
          }
          Pose {
            translation 0 0 0.02
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.5 0.5 0.5
                  baseColorMap ImageTexture {
                    url "textures/fast_helix.png"
                  }
                  metalness 0
                  roughness 0
                }
                geometry Cylinder {
                  radius 0.12
                  height 0.001
                  side FALSE
                }
              }
            ]
          }
        ]
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.12
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
      slowHelix Solid {
        translation -0.177179 -0.127453 -0.0320282
        children [
          Shape {
            appearance MattePaint {
              baseColor 0.5 0.5 0.5
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b.obj"
            }
          }
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_plates.obj"
            }
          }
        ]
        name "rear right propeller"
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.013
        #         }
        #       ]
        #     }
        #     Pose {
        #       translation 0 0 0.023
        #       rotation 0 0 1 -0.7854
        #       children [
        #         Box {
        #           size 0.23 0.018 0.005
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
    }
    DEF FRONT_RIGHT_HP_HELIX Propeller {
      shaftAxis 0 0 1
      centerOfThrust 0.0548537 -0.151294 -0.00280468
      thrustConstants 0 0 # thrustConstants -0.00026 0
      torqueConstants 0 0 # torqueConstants 0.0000052 0
      fastHelixThreshold 50
      device RotationalMotor {
        name "front right propeller"
        maxVelocity 576
        maxTorque 30.0
      }
      fastHelix Solid {
        translation 0.0548537 -0.151294 -0.00280468
        children [
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_plates.obj"
            }
          }
          Pose {
            translation 0 0 0.02
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.5 0.5 0.5
                  baseColorMap ImageTexture {
                    url "textures/fast_helix.png"
                  }
                  metalness 0
                  roughness 0
                }
                geometry Cylinder {
                  radius 0.12
                  height 0.001
                  side FALSE
                }
              }
            ]
          }
        ]
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.12
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
      slowHelix Solid {
        translation 0.0548537 -0.151294 -0.00280468
        children [
          Shape {
            appearance MattePaint {
              baseColor 0.5 0.5 0.5
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a.obj"
            }
          }
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_a_plates.obj"
            }
          }
        ]
        name "front right propeller"
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.013
        #         }
        #       ]
        #     }
        #     Pose {
        #       translation 0 0 0.023
        #       rotation 0 0 1 0.7854
        #       children [
        #         Box {
        #           size 0.23 0.018 0.005
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
    }
    DEF FRONT_LEFT_HP_HELIX Propeller {
      shaftAxis 0 0 1
      centerOfThrust 0.0548537 0.151294 -0.00280468
      thrustConstants 0 0 # thrustConstants 0.00026 0
      torqueConstants 0 0 # torqueConstants 0.0000052 0
      fastHelixThreshold 50
      device RotationalMotor {
        name "front left propeller"
        maxVelocity 576
        maxTorque 30.0
      }
      fastHelix Solid {
        translation 0.0548537 0.151294 -0.00280468
        children [
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_plates.obj"
            }
          }
          Pose {
            translation 0 0 0.02
            children [
              Shape {
                appearance PBRAppearance {
                  baseColor 0.5 0.5 0.5
                  baseColorMap ImageTexture {
                    url "textures/fast_helix.png"
                  }
                  metalness 0
                  roughness 0
                }
                geometry Cylinder {
                  radius 0.12
                  height 0.001
                  side FALSE
                }
              }
            ]
          }
        ]
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.12
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
      slowHelix Solid {
        translation 0.0548537 0.151294 -0.00280468
        children [
          Shape {
            appearance MattePaint {
              baseColor 0.5 0.5 0.5
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b.obj"
            }
          }
          Shape {
            appearance USE METAL_APPEARANCE
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_joint.obj"
            }
          }
          Shape {
            appearance GlossyPaint {
              baseColor 0.1 0.1 0.1
            }
            geometry Mesh {
              url "Mavic2Pro/meshes/helix_b_plates.obj"
            }
          }
        ]
        name "front left propeller"
        # boundingObject Group {
        #   children [
        #     Pose {
        #       translation 0 0 0.015
        #       children [
        #         Cylinder {
        #           height 0.025
        #           radius 0.013
        #         }
        #       ]
        #     }
        #     Pose {
        #       translation 0 0 0.023
        #       rotation 0 0 1 -0.7854
        #       children [
        #         Box {
        #           size 0.23 0.018 0.005
        #         }
        #       ]
        #     }
        #   ]
        # }
        # physics Physics {
        #   density -1
        #   mass 0.1
        # }
      }
    }
  ]
  name IS name
  model "DJI Mavic 2 PRO"
  boundingObject Group {
    children [
      Pose {
        children [
          Sphere {
            radius 0.2
          }
        ]
      }
    ]
  }
  physics Physics {
    density -1
    mass 0.4
    centerOfMass [
      -0.088 0 -0.04
    ]
  }
  controller IS controller
}
}
